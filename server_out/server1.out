2021-03-19 11:49:01,280 INFO  [Thread-0] root: Initialize server ...
2021-03-19 11:49:01,291 INFO  [Thread-0] root: Server listening on port: 50000
2021-03-19 11:49:01,309 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.6.2--803c7f1a12f85978cb049af5e4ef23bd8b688715, built on 09/04/2020 12:44 GMT
2021-03-19 11:49:01,309 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:host.name=localhost
2021-03-19 11:49:01,309 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.version=11.0.10
2021-03-19 11:49:01,309 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Azul Systems, Inc.
2021-03-19 11:49:01,309 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.home=/Users/steve/Library/Java/JavaVirtualMachines/azul-11.0.10/Contents/Home
2021-03-19 11:49:01,309 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/Users/steve/Desktop/UofT/year4/winter2021/ECE419/milestone3/m3-server.jar
2021-03-19 11:49:01,309 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/Users/steve/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2021-03-19 11:49:01,309 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/kz/3gb57nkn6ks6_07_dtt5lqvr0000gn/T/
2021-03-19 11:49:01,310 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2021-03-19 11:49:01,310 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
2021-03-19 11:49:01,310 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.arch=x86_64
2021-03-19 11:49:01,310 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.version=10.16
2021-03-19 11:49:01,310 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.name=steve
2021-03-19 11:49:01,310 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.home=/Users/steve
2021-03-19 11:49:01,310 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/Users/steve
2021-03-19 11:49:01,310 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.free=249MB
2021-03-19 11:49:01,310 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.max=4096MB
2021-03-19 11:49:01,310 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.total=256MB
2021-03-19 11:49:01,313 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=3000 watcher=app_kvServer.KVServer$1@48a00dff
2021-03-19 11:49:01,315 INFO  [Thread-0] org.apache.zookeeper.common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2021-03-19 11:49:01,325 INFO  [Thread-0] org.apache.zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes
2021-03-19 11:49:01,331 INFO  [Thread-0] org.apache.zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false
2021-03-19 11:49:01,339 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.SaslServerPrincipal: Canonicalized address to localhost
2021-03-19 11:49:01,340 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181.
2021-03-19 11:49:01,340 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)
2021-03-19 11:49:01,353 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Socket connection established, initiating session, client: /127.0.0.1:57010, server: localhost/127.0.0.1:2181
2021-03-19 11:49:01,354 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment request sent on localhost/127.0.0.1:2181
2021-03-19 11:49:01,384 TRACE [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxnSocket: readConnectResult 37 0x[0,0,0,0,0,0,f,ffffffa0,1,0,14,ffffffbd,52,70,1,52,0,0,0,10,ffffffb7,ffffffa7,ffffffd8,2c,10,fffffff3,ffffffff,fffffff9,ffffffe5,12,22,4d,ffffffce,71,23,2a,0,]
2021-03-19 11:49:01,386 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, session id = 0x10014bd52700152, negotiated timeout = 4000
2021-03-19 11:49:01,389 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 11:49:01,389 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:None path:null
2021-03-19 11:49:01,418 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700152, packet:: clientPath:null serverPath:null finished:false header:: 1,1  replyHeader:: 1,1085,0  request:: '/keeper/server1,,v{s{31,s{'world,'anyone}}},1  response:: '/keeper/server1 
2021-03-19 11:49:01,422 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700152, packet:: clientPath:null serverPath:null finished:false header:: 2,3  replyHeader:: 2,1085,0  request:: '/keeper/server1,T  response:: s{1085,1085,1616168941390,1616168941390,0,0,0,72080397402374482,0,0,1085} 
2021-03-19 11:49:01,449 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got notification session id: 0x10014bd52700152
2021-03-19 11:49:01,450 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1 for session id 0x10014bd52700152
2021-03-19 11:49:01,452 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 11:49:01,452 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1
2021-03-19 11:49:01,453 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700152, packet:: clientPath:null serverPath:null finished:false header:: 3,5  replyHeader:: 3,1086,0  request:: '/keeper/server1,#3132372e302e302e313a3530303030,0  response:: s{1085,1086,1616168941390,1616168941422,1,0,0,72080397402374482,15,0,1085} 
2021-03-19 11:49:01,453 INFO  [Thread-0] root: Node created at: /keeper/server1
Starting commModule
2021-03-19 11:49:01,461 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:01,461 INFO  [Thread-0] root: Connected to localhost on port 57011
2021-03-19 11:49:01,469 INFO  [Thread-1] root: Message received by server -> Status: INIT_SERVER
received adminmsg
2021-03-19 11:49:01,470 INFO  [Thread-1] root: Message sent by server -> Status: INIT_SERVER_SUCCESS
2021-03-19 11:49:01,470 INFO  [Thread-1] root: Message received by server -> Status: START
received adminmsg
2021-03-19 11:49:01,471 INFO  [Thread-1] root: Message sent by server -> Status: START_SUCCESS
Starting commModule
2021-03-19 11:49:01,476 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:01,477 INFO  [Thread-0] root: Connected to localhost on port 57014
Starting commModule
2021-03-19 11:49:01,479 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:01,480 INFO  [Thread-0] root: Connected to localhost on port 57017
Starting commModule
2021-03-19 11:49:01,483 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:01,484 INFO  [Thread-0] root: Connected to localhost on port 57019
2021-03-19 11:49:01,485 INFO  [Thread-4] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:49:01,486 INFO  [Thread-4] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:49:01,489 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:01,490 INFO  [Thread-0] root: Connected to localhost on port 57021
Starting commModule
2021-03-19 11:49:01,491 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:01,491 INFO  [Thread-0] root: Connected to localhost on port 57023
2021-03-19 11:49:01,492 INFO  [Thread-6] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:49:01,497 DEBUG [Thread-6] root: Getting successors
2021-03-19 11:49:01,497 DEBUG [Thread-6] root: Got successors
2021-03-19 11:49:01,498 DEBUG [Thread-6] root: Propagating to: 127.0.0.1:50002 127.0.0.1:50000
2021-03-19 11:49:01,500 INFO  [Thread-6] root: Client communication module connected
Starting commModule
2021-03-19 11:49:01,501 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:01,501 INFO  [Thread-6] root: Client communication module connected
2021-03-19 11:49:01,501 DEBUG [Thread-6] root: {}
2021-03-19 11:49:01,501 INFO  [Thread-0] root: Connected to localhost on port 57025
2021-03-19 11:49:01,501 INFO  [Thread-6] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:49:02,069 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,070 INFO  [Thread-0] root: Connected to localhost on port 57030
2021-03-19 11:49:02,071 INFO  [Thread-8] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:49:02,072 INFO  [Thread-8] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:49:02,076 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,077 INFO  [Thread-0] root: Connected to localhost on port 57032
Starting commModule
2021-03-19 11:49:02,079 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,080 INFO  [Thread-0] root: Connected to localhost on port 57034
2021-03-19 11:49:02,081 INFO  [Thread-10] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:49:02,082 DEBUG [Thread-10] root: Getting successors
2021-03-19 11:49:02,082 DEBUG [Thread-10] root: Got successors
2021-03-19 11:49:02,082 DEBUG [Thread-10] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 11:49:02,083 INFO  [Thread-10] root: Client communication module connected
2021-03-19 11:49:02,084 INFO  [Thread-10] root: Client communication module connected
2021-03-19 11:49:02,084 DEBUG [Thread-10] root: {}
2021-03-19 11:49:02,084 INFO  [Thread-10] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:49:02,094 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,095 INFO  [Thread-0] root: Connected to localhost on port 57040
2021-03-19 11:49:02,095 INFO  [Thread-11] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:49:02,096 INFO  [Thread-11] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:49:02,104 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,105 INFO  [Thread-0] root: Connected to localhost on port 57043
Starting commModule
2021-03-19 11:49:02,106 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,107 INFO  [Thread-0] root: Connected to localhost on port 57045
2021-03-19 11:49:02,108 INFO  [Thread-13] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:49:02,108 DEBUG [Thread-13] root: Getting successors
2021-03-19 11:49:02,108 DEBUG [Thread-13] root: Got successors
2021-03-19 11:49:02,108 DEBUG [Thread-13] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 11:49:02,109 INFO  [Thread-13] root: Client communication module connected
2021-03-19 11:49:02,109 INFO  [Thread-13] root: Client communication module connected
2021-03-19 11:49:02,110 DEBUG [Thread-13] root: {}
2021-03-19 11:49:02,110 INFO  [Thread-13] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:49:02,124 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,125 INFO  [Thread-0] root: Connected to localhost on port 57050
Starting commModule
2021-03-19 11:49:02,704 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,705 INFO  [Thread-0] root: Connected to localhost on port 57056
2021-03-19 11:49:02,706 INFO  [Thread-15] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:49:02,706 INFO  [Thread-15] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:49:02,713 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,714 INFO  [Thread-0] root: Connected to localhost on port 57060
Starting commModule
2021-03-19 11:49:02,714 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,715 INFO  [Thread-0] root: Connected to localhost on port 57061
2021-03-19 11:49:02,716 INFO  [Thread-17] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:49:02,716 DEBUG [Thread-17] root: Getting successors
2021-03-19 11:49:02,716 DEBUG [Thread-17] root: Got successors
2021-03-19 11:49:02,716 DEBUG [Thread-17] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 11:49:02,717 INFO  [Thread-17] root: Client communication module connected
2021-03-19 11:49:02,717 INFO  [Thread-17] root: Client communication module connected
2021-03-19 11:49:02,717 DEBUG [Thread-17] root: {}
2021-03-19 11:49:02,717 INFO  [Thread-17] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:49:02,722 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,723 INFO  [Thread-0] root: Connected to localhost on port 57067
2021-03-19 11:49:02,723 INFO  [Thread-18] root: Message received by server -> Status: MOVE_DATA
received adminmsg
2021-03-19 11:49:02,723 DEBUG [Thread-18] root: Input data: 
2021-03-19 11:49:02,723 DEBUG [Thread-18] root: b3638a32c297f43aa37e63bbd839fc7f:dcee0277eb13b76434e8dcd31a387709
2021-03-19 11:49:02,723 DEBUG [Thread-18] root: 127.0.0.1:50001
2021-03-19 11:49:02,724 INFO  [Thread-18] root: Client communication module connected
2021-03-19 11:49:02,724 DEBUG [Thread-18] root: Host: 127.0.0.1
2021-03-19 11:49:02,724 DEBUG [Thread-18] root: Port: 50001
2021-03-19 11:49:02,724 DEBUG [Thread-18] root: Range: b3638a32c297f43aa37e63bbd839fc7f:dcee0277eb13b76434e8dcd31a387709
2021-03-19 11:49:02,724 DEBUG [Thread-18] root: Starting flush data
2021-03-19 11:49:02,724 DEBUG [Thread-18] root: Finished flush data
2021-03-19 11:49:02,724 DEBUG [Thread-18] root: Closing conn
2021-03-19 11:49:02,725 INFO  [Thread-18] root: Connection closed!
2021-03-19 11:49:02,725 DEBUG [Thread-18] root: Closed conn
2021-03-19 11:49:02,725 INFO  [Thread-18] root: Message sent by server -> Status: MOVE_DATA_SUCCESS
Starting commModule
2021-03-19 11:49:02,729 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,730 INFO  [Thread-0] root: Connected to localhost on port 57070
2021-03-19 11:49:02,731 INFO  [Thread-19] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:49:02,731 INFO  [Thread-19] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:49:02,742 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,743 INFO  [Thread-0] root: Connected to localhost on port 57075
Starting commModule
2021-03-19 11:49:02,743 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,744 INFO  [Thread-0] root: Connected to localhost on port 57076
2021-03-19 11:49:02,745 INFO  [Thread-21] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:49:02,745 DEBUG [Thread-21] root: Getting successors
2021-03-19 11:49:02,745 DEBUG [Thread-21] root: Got successors
2021-03-19 11:49:02,745 DEBUG [Thread-21] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 11:49:02,746 INFO  [Thread-21] root: Client communication module connected
2021-03-19 11:49:02,746 INFO  [Thread-21] root: Client communication module connected
2021-03-19 11:49:02,746 DEBUG [Thread-21] root: {}
2021-03-19 11:49:02,747 INFO  [Thread-21] root: Message sent by server -> Status: PROPAGATE_SUCCESS
2021-03-19 11:49:02,760 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got ping response for session id: 0x10014bd52700152 after 0ms.
Starting commModule
2021-03-19 11:49:02,762 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,763 INFO  [Thread-0] root: Connected to localhost on port 57083
Starting commModule
2021-03-19 11:49:02,766 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:02,767 INFO  [Thread-23] root: Message received by server -> Status: SHUTDOWN
received adminmsg
2021-03-19 11:49:02,767 INFO  [Thread-0] root: Connected to localhost on port 57086
2021-03-19 11:49:02,767 DEBUG [Thread-23] root: Closing the program
2021-03-19 11:49:02,767 INFO  [Thread-23] root: Message sent by server -> Status: SHUTDOWN_SUCCESS
2021-03-19 11:49:02,768 ERROR [Thread-0] root: Error! Unable to establish connection. 

java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:458)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at app_kvServer.KVServer.run(KVServer.java:408)
2021-03-19 11:49:02,770 INFO  [Thread-0] root: Server stopped.
2021-03-19 11:49:02,771 INFO  [Thread-0] root: Clearing KV Storage...
2021-03-19 11:49:10,868 INFO  [Thread-0] root: Initialize server ...
2021-03-19 11:49:10,881 INFO  [Thread-0] root: Server listening on port: 50000
2021-03-19 11:49:10,903 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.6.2--803c7f1a12f85978cb049af5e4ef23bd8b688715, built on 09/04/2020 12:44 GMT
2021-03-19 11:49:10,903 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:host.name=localhost
2021-03-19 11:49:10,903 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.version=11.0.10
2021-03-19 11:49:10,903 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Azul Systems, Inc.
2021-03-19 11:49:10,903 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.home=/Users/steve/Library/Java/JavaVirtualMachines/azul-11.0.10/Contents/Home
2021-03-19 11:49:10,903 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/Users/steve/Desktop/UofT/year4/winter2021/ECE419/milestone3/m3-server.jar
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/Users/steve/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/kz/3gb57nkn6ks6_07_dtt5lqvr0000gn/T/
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.arch=x86_64
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.version=10.16
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.name=steve
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.home=/Users/steve
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/Users/steve
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.free=249MB
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.max=4096MB
2021-03-19 11:49:10,904 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.total=256MB
2021-03-19 11:49:10,907 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=3000 watcher=app_kvServer.KVServer$1@52c4671e
2021-03-19 11:49:10,911 INFO  [Thread-0] org.apache.zookeeper.common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2021-03-19 11:49:10,923 INFO  [Thread-0] org.apache.zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes
2021-03-19 11:49:10,930 INFO  [Thread-0] org.apache.zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false
2021-03-19 11:49:10,940 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.SaslServerPrincipal: Canonicalized address to localhost
2021-03-19 11:49:10,942 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181.
2021-03-19 11:49:10,942 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)
2021-03-19 11:49:10,957 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Socket connection established, initiating session, client: /127.0.0.1:57142, server: localhost/127.0.0.1:2181
2021-03-19 11:49:10,958 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment request sent on localhost/127.0.0.1:2181
2021-03-19 11:49:10,988 TRACE [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxnSocket: readConnectResult 37 0x[0,0,0,0,0,0,f,ffffffa0,1,0,14,ffffffbd,52,70,1,5a,0,0,0,10,50,ffffffb0,ffffffa9,2c,f,50,fffffffa,20,ffffff8f,2a,5c,ffffffa8,6b,ffffffb8,ffffffc7,ffffff92,0,]
2021-03-19 11:49:10,990 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, session id = 0x10014bd5270015a, negotiated timeout = 4000
2021-03-19 11:49:11,010 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 11:49:11,011 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:None path:null
2021-03-19 11:49:11,044 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd5270015a, packet:: clientPath:null serverPath:null finished:false header:: 1,1  replyHeader:: 1,1109,0  request:: '/keeper/server1,,v{s{31,s{'world,'anyone}}},1  response:: '/keeper/server1 
2021-03-19 11:49:11,054 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd5270015a, packet:: clientPath:null serverPath:null finished:false header:: 2,3  replyHeader:: 2,1109,0  request:: '/keeper/server1,T  response:: s{1109,1109,1616168951012,1616168951012,0,0,0,72080397402374490,0,0,1109} 
2021-03-19 11:49:11,083 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got notification session id: 0x10014bd5270015a
2021-03-19 11:49:11,084 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1 for session id 0x10014bd5270015a
2021-03-19 11:49:11,088 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 11:49:11,089 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1
2021-03-19 11:49:11,091 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd5270015a, packet:: clientPath:null serverPath:null finished:false header:: 3,5  replyHeader:: 3,1110,0  request:: '/keeper/server1,#3132372e302e302e313a3530303030,0  response:: s{1109,1110,1616168951012,1616168951057,1,0,0,72080397402374490,15,0,1109} 
2021-03-19 11:49:11,092 INFO  [Thread-0] root: Node created at: /keeper/server1
Starting commModule
2021-03-19 11:49:11,116 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:11,118 INFO  [Thread-0] root: Connected to localhost on port 57143
2021-03-19 11:49:11,153 INFO  [Thread-1] root: Message received by server -> Status: INIT_SERVER
received adminmsg
2021-03-19 11:49:11,156 INFO  [Thread-1] root: Message sent by server -> Status: INIT_SERVER_SUCCESS
2021-03-19 11:49:11,157 INFO  [Thread-1] root: Message received by server -> Status: START
received adminmsg
2021-03-19 11:49:11,158 INFO  [Thread-1] root: Message sent by server -> Status: START_SUCCESS
Starting commModule
2021-03-19 11:49:11,202 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:11,203 INFO  [Thread-0] root: Connected to localhost on port 57149
Starting commModule
2021-03-19 11:49:11,218 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:11,220 INFO  [Thread-0] root: Connected to localhost on port 57154
Starting commModule
2021-03-19 11:49:11,229 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:11,232 INFO  [Thread-0] root: Connected to localhost on port 57157
Starting commModule
2021-03-19 11:49:11,259 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:11,260 INFO  [Thread-0] root: Connected to localhost on port 57161
2021-03-19 11:49:11,263 INFO  [Thread-5] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:49:11,265 INFO  [Thread-5] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:49:11,271 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:11,273 INFO  [Thread-0] root: Connected to localhost on port 57164
Starting commModule
2021-03-19 11:49:11,284 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:11,287 INFO  [Thread-0] root: Connected to localhost on port 57169
Starting commModule
2021-03-19 11:49:11,290 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:11,292 INFO  [Thread-0] root: Connected to localhost on port 57171
2021-03-19 11:49:11,294 INFO  [Thread-8] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:49:11,304 DEBUG [Thread-8] root: Getting successors
2021-03-19 11:49:11,304 DEBUG [Thread-8] root: Got successors
2021-03-19 11:49:11,305 DEBUG [Thread-8] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 11:49:11,309 INFO  [Thread-8] root: Client communication module connected
2021-03-19 11:49:11,310 INFO  [Thread-8] root: Client communication module connected
2021-03-19 11:49:11,310 DEBUG [Thread-8] root: {}
2021-03-19 11:49:11,311 INFO  [Thread-8] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:49:11,330 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:49:11,331 INFO  [Thread-0] root: Connected to localhost on port 57177
2021-03-19 11:49:11,331 INFO  [Thread-9] root: Message received by server -> Status: SHUTDOWN
received adminmsg
2021-03-19 11:49:11,332 DEBUG [Thread-9] root: Closing the program
2021-03-19 11:49:11,333 INFO  [Thread-9] root: Message sent by server -> Status: SHUTDOWN_SUCCESS
2021-03-19 11:49:11,334 ERROR [Thread-0] root: Error! Unable to establish connection. 

java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:458)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at app_kvServer.KVServer.run(KVServer.java:408)
2021-03-19 11:49:11,339 INFO  [Thread-0] root: Server stopped.
2021-03-19 11:49:11,339 INFO  [Thread-0] root: Clearing KV Storage...
2021-03-19 11:58:48,478 INFO  [Thread-0] root: Initialize server ...
2021-03-19 11:58:48,490 INFO  [Thread-0] root: Server listening on port: 50000
2021-03-19 11:58:48,508 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.6.2--803c7f1a12f85978cb049af5e4ef23bd8b688715, built on 09/04/2020 12:44 GMT
2021-03-19 11:58:48,508 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:host.name=localhost
2021-03-19 11:58:48,508 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.version=11.0.10
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Azul Systems, Inc.
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.home=/Users/steve/Library/Java/JavaVirtualMachines/azul-11.0.10/Contents/Home
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/Users/steve/Desktop/UofT/year4/winter2021/ECE419/milestone3/m3-server.jar
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/Users/steve/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/kz/3gb57nkn6ks6_07_dtt5lqvr0000gn/T/
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.arch=x86_64
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.version=10.16
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.name=steve
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.home=/Users/steve
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/Users/steve
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.free=249MB
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.max=4096MB
2021-03-19 11:58:48,509 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.total=256MB
2021-03-19 11:58:48,512 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=3000 watcher=app_kvServer.KVServer$1@7a8d20e7
2021-03-19 11:58:48,515 INFO  [Thread-0] org.apache.zookeeper.common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2021-03-19 11:58:48,525 INFO  [Thread-0] org.apache.zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes
2021-03-19 11:58:48,531 INFO  [Thread-0] org.apache.zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false
2021-03-19 11:58:48,539 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.SaslServerPrincipal: Canonicalized address to localhost
2021-03-19 11:58:48,540 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181.
2021-03-19 11:58:48,540 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)
2021-03-19 11:58:48,554 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Socket connection established, initiating session, client: /0:0:0:0:0:0:0:1:57540, server: localhost/0:0:0:0:0:0:0:1:2181
2021-03-19 11:58:48,555 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment request sent on localhost/0:0:0:0:0:0:0:1:2181
2021-03-19 11:58:48,585 TRACE [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxnSocket: readConnectResult 37 0x[0,0,0,0,0,0,f,ffffffa0,1,0,14,ffffffbd,52,70,1,74,0,0,0,10,ffffff8d,ffffff90,fffffff9,2b,ffffffce,2c,25,33,4c,3,76,ffffffbe,38,ffffffc1,2f,ffffff9b,0,]
2021-03-19 11:58:48,588 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2181, session id = 0x10014bd52700174, negotiated timeout = 4000
2021-03-19 11:58:48,591 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 11:58:48,591 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:None path:null
2021-03-19 11:58:48,619 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700174, packet:: clientPath:null serverPath:null finished:false header:: 1,1  replyHeader:: 1,1193,0  request:: '/keeper/server1,,v{s{31,s{'world,'anyone}}},1  response:: '/keeper/server1 
2021-03-19 11:58:48,624 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700174, packet:: clientPath:null serverPath:null finished:false header:: 2,3  replyHeader:: 2,1193,0  request:: '/keeper/server1,T  response:: s{1193,1193,1616169528591,1616169528591,0,0,0,72080397402374516,0,0,1193} 
2021-03-19 11:58:48,650 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got notification session id: 0x10014bd52700174
2021-03-19 11:58:48,651 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1 for session id 0x10014bd52700174
2021-03-19 11:58:48,652 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 11:58:48,652 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1
2021-03-19 11:58:48,653 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700174, packet:: clientPath:null serverPath:null finished:false header:: 3,5  replyHeader:: 3,1194,0  request:: '/keeper/server1,#3132372e302e302e313a3530303030,0  response:: s{1193,1194,1616169528591,1616169528625,1,0,0,72080397402374516,15,0,1193} 
2021-03-19 11:58:48,653 INFO  [Thread-0] root: Node created at: /keeper/server1
Starting commModule
2021-03-19 11:58:48,661 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:48,662 INFO  [Thread-0] root: Connected to localhost on port 57541
2021-03-19 11:58:48,670 INFO  [Thread-1] root: Message received by server -> Status: INIT_SERVER
received adminmsg
2021-03-19 11:58:48,671 INFO  [Thread-1] root: Message sent by server -> Status: INIT_SERVER_SUCCESS
2021-03-19 11:58:48,671 INFO  [Thread-1] root: Message received by server -> Status: START
received adminmsg
2021-03-19 11:58:48,671 INFO  [Thread-1] root: Message sent by server -> Status: START_SUCCESS
Starting commModule
2021-03-19 11:58:48,684 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:48,684 INFO  [Thread-0] root: Connected to localhost on port 57546
Starting commModule
2021-03-19 11:58:48,688 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:48,691 INFO  [Thread-0] root: Connected to localhost on port 57550
Starting commModule
2021-03-19 11:58:48,698 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:48,699 INFO  [Thread-0] root: Connected to localhost on port 57555
Starting commModule
2021-03-19 11:58:48,708 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:48,709 INFO  [Thread-0] root: Connected to localhost on port 57559
2021-03-19 11:58:48,710 INFO  [Thread-5] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:58:48,711 INFO  [Thread-5] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:58:48,713 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:48,714 INFO  [Thread-0] root: Connected to localhost on port 57561
Starting commModule
2021-03-19 11:58:48,718 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:48,719 INFO  [Thread-0] root: Connected to localhost on port 57565
Starting commModule
2021-03-19 11:58:48,723 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:48,723 INFO  [Thread-0] root: Connected to localhost on port 57569
2021-03-19 11:58:48,724 INFO  [Thread-8] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:58:48,729 DEBUG [Thread-8] root: Getting successors
2021-03-19 11:58:48,729 DEBUG [Thread-8] root: Got successors
2021-03-19 11:58:48,730 DEBUG [Thread-8] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 11:58:48,732 INFO  [Thread-8] root: Client communication module connected
2021-03-19 11:58:48,732 INFO  [Thread-8] root: Client communication module connected
2021-03-19 11:58:48,732 DEBUG [Thread-8] root: {}
2021-03-19 11:58:48,733 INFO  [Thread-8] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:58:48,740 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:48,741 INFO  [Thread-0] root: Connected to localhost on port 57575
2021-03-19 11:58:48,741 INFO  [Thread-9] root: Message received by server -> Status: SHUTDOWN
received adminmsg
2021-03-19 11:58:48,741 DEBUG [Thread-9] root: Closing the program
2021-03-19 11:58:48,742 INFO  [Thread-9] root: Message sent by server -> Status: SHUTDOWN_SUCCESS
2021-03-19 11:58:48,742 ERROR [Thread-0] root: Error! Unable to establish connection. 

java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:458)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at app_kvServer.KVServer.run(KVServer.java:408)
2021-03-19 11:58:48,745 INFO  [Thread-0] root: Server stopped.
2021-03-19 11:58:48,745 INFO  [Thread-0] root: Clearing KV Storage...
2021-03-19 11:58:54,795 INFO  [Thread-0] root: Initialize server ...
2021-03-19 11:58:54,809 INFO  [Thread-0] root: Server listening on port: 50000
2021-03-19 11:58:54,829 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.6.2--803c7f1a12f85978cb049af5e4ef23bd8b688715, built on 09/04/2020 12:44 GMT
2021-03-19 11:58:54,829 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:host.name=localhost
2021-03-19 11:58:54,829 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.version=11.0.10
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Azul Systems, Inc.
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.home=/Users/steve/Library/Java/JavaVirtualMachines/azul-11.0.10/Contents/Home
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/Users/steve/Desktop/UofT/year4/winter2021/ECE419/milestone3/m3-server.jar
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/Users/steve/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/kz/3gb57nkn6ks6_07_dtt5lqvr0000gn/T/
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.arch=x86_64
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.version=10.16
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.name=steve
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.home=/Users/steve
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/Users/steve
2021-03-19 11:58:54,830 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.free=249MB
2021-03-19 11:58:54,831 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.max=4096MB
2021-03-19 11:58:54,831 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.total=256MB
2021-03-19 11:58:54,834 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=3000 watcher=app_kvServer.KVServer$1@48a00dff
2021-03-19 11:58:54,837 INFO  [Thread-0] org.apache.zookeeper.common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2021-03-19 11:58:54,847 INFO  [Thread-0] org.apache.zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes
2021-03-19 11:58:54,853 INFO  [Thread-0] org.apache.zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false
2021-03-19 11:58:54,861 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.SaslServerPrincipal: Canonicalized address to localhost
2021-03-19 11:58:54,862 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181.
2021-03-19 11:58:54,862 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)
2021-03-19 11:58:54,876 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Socket connection established, initiating session, client: /0:0:0:0:0:0:0:1:57579, server: localhost/0:0:0:0:0:0:0:1:2181
2021-03-19 11:58:54,877 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment request sent on localhost/0:0:0:0:0:0:0:1:2181
2021-03-19 11:58:54,906 TRACE [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxnSocket: readConnectResult 37 0x[0,0,0,0,0,0,f,ffffffa0,1,0,14,ffffffbd,52,70,1,77,0,0,0,10,7a,6f,ffffffff,2b,2e,ffffffe1,45,ffffffee,57,ffffffc0,e,ffffff93,64,38,1b,ffffffce,0,]
2021-03-19 11:58:54,909 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2181, session id = 0x10014bd52700177, negotiated timeout = 4000
2021-03-19 11:58:54,912 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 11:58:54,912 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:None path:null
2021-03-19 11:58:54,941 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700177, packet:: clientPath:null serverPath:null finished:false header:: 1,1  replyHeader:: 1,1202,0  request:: '/keeper/server1,,v{s{31,s{'world,'anyone}}},1  response:: '/keeper/server1 
2021-03-19 11:58:54,945 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700177, packet:: clientPath:null serverPath:null finished:false header:: 2,3  replyHeader:: 2,1202,0  request:: '/keeper/server1,T  response:: s{1202,1202,1616169534912,1616169534912,0,0,0,72080397402374519,0,0,1202} 
2021-03-19 11:58:54,972 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got notification session id: 0x10014bd52700177
2021-03-19 11:58:54,973 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1 for session id 0x10014bd52700177
2021-03-19 11:58:54,975 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 11:58:54,975 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1
2021-03-19 11:58:54,976 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700177, packet:: clientPath:null serverPath:null finished:false header:: 3,5  replyHeader:: 3,1203,0  request:: '/keeper/server1,#3132372e302e302e313a3530303030,0  response:: s{1202,1203,1616169534912,1616169534946,1,0,0,72080397402374519,15,0,1202} 
2021-03-19 11:58:54,976 INFO  [Thread-0] root: Node created at: /keeper/server1
Starting commModule
2021-03-19 11:58:54,984 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:54,985 INFO  [Thread-0] root: Connected to localhost on port 57580
2021-03-19 11:58:54,993 INFO  [Thread-1] root: Message received by server -> Status: INIT_SERVER
received adminmsg
2021-03-19 11:58:54,994 INFO  [Thread-1] root: Message sent by server -> Status: INIT_SERVER_SUCCESS
2021-03-19 11:58:54,995 INFO  [Thread-1] root: Message received by server -> Status: START
received adminmsg
2021-03-19 11:58:54,995 INFO  [Thread-1] root: Message sent by server -> Status: START_SUCCESS
Starting commModule
2021-03-19 11:58:54,995 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:54,996 INFO  [Thread-0] root: Connected to localhost on port 57581
2021-03-19 11:58:54,997 INFO  [Thread-2] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:58:54,998 INFO  [Thread-2] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:58:54,999 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:54,999 INFO  [Thread-0] root: Connected to localhost on port 57582
2021-03-19 11:58:55,000 INFO  [Thread-3] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:58:55,005 DEBUG [Thread-3] root: Getting successors
2021-03-19 11:58:55,005 DEBUG [Thread-3] root: Got successors
2021-03-19 11:58:55,006 DEBUG [Thread-3] root: Propagating to: 127.0.0.1:50000 127.0.0.1:50000
Starting commModule
2021-03-19 11:58:55,008 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:55,008 INFO  [Thread-3] root: Client communication module connected
2021-03-19 11:58:55,009 INFO  [Thread-0] root: Connected to localhost on port 57583
Starting commModule
2021-03-19 11:58:55,009 INFO  [Thread-3] root: Client communication module connected
2021-03-19 11:58:55,009 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:55,009 DEBUG [Thread-3] root: {}
2021-03-19 11:58:55,010 INFO  [Thread-0] root: Connected to localhost on port 57584
2021-03-19 11:58:55,010 INFO  [Thread-3] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:58:55,514 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:55,515 INFO  [Thread-0] root: Connected to localhost on port 57588
2021-03-19 11:58:55,516 INFO  [Thread-6] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:58:55,516 INFO  [Thread-6] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:58:55,517 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:55,518 INFO  [Thread-0] root: Connected to localhost on port 57589
2021-03-19 11:58:55,519 INFO  [Thread-7] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:58:55,519 DEBUG [Thread-7] root: Getting successors
2021-03-19 11:58:55,520 DEBUG [Thread-7] root: Got successors
2021-03-19 11:58:55,520 DEBUG [Thread-7] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50000
2021-03-19 11:58:55,520 INFO  [Thread-7] root: Client communication module connected
Starting commModule
2021-03-19 11:58:55,521 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:55,521 INFO  [Thread-7] root: Client communication module connected
2021-03-19 11:58:55,521 DEBUG [Thread-7] root: {}
2021-03-19 11:58:55,522 INFO  [Thread-0] root: Connected to localhost on port 57591
2021-03-19 11:58:55,522 INFO  [Thread-7] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:58:55,522 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:55,523 INFO  [Thread-0] root: Connected to localhost on port 57592
2021-03-19 11:58:55,523 INFO  [Thread-9] root: Message received by server -> Status: MOVE_DATA
received adminmsg
2021-03-19 11:58:55,524 DEBUG [Thread-9] root: Input data: 
2021-03-19 11:58:55,524 DEBUG [Thread-9] root: 358343938402ebb5110716c6e836f5a3:a98109598267087dfc364fae4cf24578
2021-03-19 11:58:55,524 DEBUG [Thread-9] root: 127.0.0.1:50003
2021-03-19 11:58:55,524 INFO  [Thread-9] root: Client communication module connected
2021-03-19 11:58:55,525 DEBUG [Thread-9] root: Host: 127.0.0.1
2021-03-19 11:58:55,525 DEBUG [Thread-9] root: Port: 50003
2021-03-19 11:58:55,525 DEBUG [Thread-9] root: Range: 358343938402ebb5110716c6e836f5a3:a98109598267087dfc364fae4cf24578
2021-03-19 11:58:55,525 DEBUG [Thread-9] root: Starting flush data
2021-03-19 11:58:55,525 DEBUG [Thread-9] root: Finished flush data
2021-03-19 11:58:55,525 DEBUG [Thread-9] root: Closing conn
2021-03-19 11:58:55,525 INFO  [Thread-9] root: Connection closed!
2021-03-19 11:58:55,525 DEBUG [Thread-9] root: Closed conn
2021-03-19 11:58:55,525 INFO  [Thread-9] root: Message sent by server -> Status: MOVE_DATA_SUCCESS
Starting commModule
2021-03-19 11:58:55,526 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:55,527 INFO  [Thread-0] root: Connected to localhost on port 57594
2021-03-19 11:58:55,528 INFO  [Thread-10] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:58:55,528 INFO  [Thread-10] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:58:55,533 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:55,534 INFO  [Thread-0] root: Connected to localhost on port 57596
2021-03-19 11:58:55,534 INFO  [Thread-11] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:58:55,535 DEBUG [Thread-11] root: Getting successors
2021-03-19 11:58:55,535 DEBUG [Thread-11] root: Got successors
2021-03-19 11:58:55,535 DEBUG [Thread-11] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50000
2021-03-19 11:58:55,535 INFO  [Thread-11] root: Client communication module connected
Starting commModule
2021-03-19 11:58:55,536 INFO  [Thread-11] root: Client communication module connected
2021-03-19 11:58:55,536 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:55,536 DEBUG [Thread-11] root: {}
2021-03-19 11:58:55,537 INFO  [Thread-11] root: Message sent by server -> Status: PROPAGATE_SUCCESS
2021-03-19 11:58:55,537 INFO  [Thread-0] root: Connected to localhost on port 57598
Starting commModule
2021-03-19 11:58:55,547 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:55,548 INFO  [Thread-0] root: Connected to localhost on port 57600
Starting commModule
2021-03-19 11:58:56,124 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,125 INFO  [Thread-0] root: Connected to localhost on port 57605
2021-03-19 11:58:56,127 INFO  [Thread-14] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:58:56,127 INFO  [Thread-14] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:58:56,131 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,132 INFO  [Thread-0] root: Connected to localhost on port 57607
2021-03-19 11:58:56,133 INFO  [Thread-15] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:58:56,133 DEBUG [Thread-15] root: Getting successors
2021-03-19 11:58:56,133 DEBUG [Thread-15] root: Got successors
2021-03-19 11:58:56,133 DEBUG [Thread-15] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50001
2021-03-19 11:58:56,134 INFO  [Thread-15] root: Client communication module connected
2021-03-19 11:58:56,134 INFO  [Thread-15] root: Client communication module connected
2021-03-19 11:58:56,134 DEBUG [Thread-15] root: {}
2021-03-19 11:58:56,134 INFO  [Thread-15] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:58:56,138 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,139 INFO  [Thread-0] root: Connected to localhost on port 57612
Starting commModule
2021-03-19 11:58:56,139 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,140 INFO  [Thread-0] root: Connected to localhost on port 57613
2021-03-19 11:58:56,140 INFO  [Thread-17] root: Message received by server -> Status: MOVE_DATA
received adminmsg
2021-03-19 11:58:56,140 DEBUG [Thread-17] root: Input data: 
2021-03-19 11:58:56,140 DEBUG [Thread-17] root: a98109598267087dfc364fae4cf24579:dcee0277eb13b76434e8dcd31a387709
2021-03-19 11:58:56,140 DEBUG [Thread-17] root: 127.0.0.1:50001
2021-03-19 11:58:56,141 INFO  [Thread-17] root: Client communication module connected
2021-03-19 11:58:56,141 DEBUG [Thread-17] root: Host: 127.0.0.1
2021-03-19 11:58:56,141 DEBUG [Thread-17] root: Port: 50001
2021-03-19 11:58:56,141 DEBUG [Thread-17] root: Range: a98109598267087dfc364fae4cf24579:dcee0277eb13b76434e8dcd31a387709
2021-03-19 11:58:56,141 DEBUG [Thread-17] root: Starting flush data
2021-03-19 11:58:56,141 DEBUG [Thread-17] root: Finished flush data
2021-03-19 11:58:56,141 DEBUG [Thread-17] root: Closing conn
2021-03-19 11:58:56,142 INFO  [Thread-17] root: Connection closed!
2021-03-19 11:58:56,142 DEBUG [Thread-17] root: Closed conn
2021-03-19 11:58:56,142 INFO  [Thread-17] root: Message sent by server -> Status: MOVE_DATA_SUCCESS
Starting commModule
2021-03-19 11:58:56,143 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,143 INFO  [Thread-0] root: Connected to localhost on port 57615
2021-03-19 11:58:56,144 INFO  [Thread-18] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:58:56,144 INFO  [Thread-18] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:58:56,151 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,152 INFO  [Thread-0] root: Connected to localhost on port 57618
2021-03-19 11:58:56,153 INFO  [Thread-19] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:58:56,153 DEBUG [Thread-19] root: Getting successors
2021-03-19 11:58:56,153 DEBUG [Thread-19] root: Got successors
2021-03-19 11:58:56,153 DEBUG [Thread-19] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50001
2021-03-19 11:58:56,154 INFO  [Thread-19] root: Client communication module connected
2021-03-19 11:58:56,154 INFO  [Thread-19] root: Client communication module connected
2021-03-19 11:58:56,154 DEBUG [Thread-19] root: {}
2021-03-19 11:58:56,154 INFO  [Thread-19] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:58:56,158 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,159 INFO  [Thread-0] root: Connected to localhost on port 57623
Starting commModule
2021-03-19 11:58:56,170 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,171 INFO  [Thread-0] root: Connected to localhost on port 57625
2021-03-19 11:58:56,281 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got ping response for session id: 0x10014bd52700177 after 0ms.
Starting commModule
2021-03-19 11:58:56,727 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,728 INFO  [Thread-0] root: Connected to localhost on port 57630
2021-03-19 11:58:56,728 INFO  [Thread-22] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:58:56,729 INFO  [Thread-22] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:58:56,736 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,737 INFO  [Thread-0] root: Connected to localhost on port 57633
2021-03-19 11:58:56,738 INFO  [Thread-23] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:58:56,738 DEBUG [Thread-23] root: Getting successors
2021-03-19 11:58:56,738 DEBUG [Thread-23] root: Got successors
2021-03-19 11:58:56,738 DEBUG [Thread-23] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 11:58:56,739 INFO  [Thread-23] root: Client communication module connected
2021-03-19 11:58:56,739 INFO  [Thread-23] root: Client communication module connected
2021-03-19 11:58:56,739 DEBUG [Thread-23] root: {}
2021-03-19 11:58:56,740 INFO  [Thread-23] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:58:56,746 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,746 INFO  [Thread-0] root: Connected to localhost on port 57640
Starting commModule
2021-03-19 11:58:56,750 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,751 INFO  [Thread-0] root: Connected to localhost on port 57644
2021-03-19 11:58:56,751 INFO  [Thread-25] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 11:58:56,752 INFO  [Thread-25] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 11:58:56,761 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,762 INFO  [Thread-0] root: Connected to localhost on port 57648
2021-03-19 11:58:56,762 INFO  [Thread-26] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 11:58:56,763 DEBUG [Thread-26] root: Getting successors
2021-03-19 11:58:56,763 DEBUG [Thread-26] root: Got successors
2021-03-19 11:58:56,763 DEBUG [Thread-26] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 11:58:56,763 INFO  [Thread-26] root: Client communication module connected
2021-03-19 11:58:56,764 INFO  [Thread-26] root: Client communication module connected
2021-03-19 11:58:56,764 DEBUG [Thread-26] root: {}
2021-03-19 11:58:56,764 INFO  [Thread-26] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 11:58:56,771 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,772 INFO  [Thread-0] root: Connected to localhost on port 57655
Starting commModule
2021-03-19 11:58:56,782 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,783 INFO  [Thread-0] root: Connected to localhost on port 57659
Starting commModule
2021-03-19 11:58:56,784 INFO  [Thread-0] root: Server communication module connected
2021-03-19 11:58:56,784 INFO  [Thread-0] root: Connected to localhost on port 57660
2021-03-19 11:58:56,784 INFO  [Thread-29] root: Message received by server -> Status: SHUTDOWN
received adminmsg
2021-03-19 11:58:56,784 DEBUG [Thread-29] root: Closing the program
2021-03-19 11:58:56,785 INFO  [Thread-29] root: Message sent by server -> Status: SHUTDOWN_SUCCESS
2021-03-19 11:58:56,785 ERROR [Thread-0] root: Error! Unable to establish connection. 

java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:458)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at app_kvServer.KVServer.run(KVServer.java:408)
2021-03-19 11:58:56,787 INFO  [Thread-0] root: Server stopped.
2021-03-19 11:58:56,787 INFO  [Thread-0] root: Clearing KV Storage...
2021-03-19 15:29:06,201 INFO  [Thread-0] root: Initialize server ...
2021-03-19 15:29:06,234 INFO  [Thread-0] root: Server listening on port: 50000
2021-03-19 15:29:06,257 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.6.2--803c7f1a12f85978cb049af5e4ef23bd8b688715, built on 09/04/2020 12:44 GMT
2021-03-19 15:29:06,257 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:host.name=localhost
2021-03-19 15:29:06,257 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.version=11.0.10
2021-03-19 15:29:06,257 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Azul Systems, Inc.
2021-03-19 15:29:06,257 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.home=/Users/steve/Library/Java/JavaVirtualMachines/azul-11.0.10/Contents/Home
2021-03-19 15:29:06,257 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/Users/steve/Desktop/UofT/year4/winter2021/ECE419/milestone3/m3-server.jar
2021-03-19 15:29:06,257 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/Users/steve/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2021-03-19 15:29:06,258 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/kz/3gb57nkn6ks6_07_dtt5lqvr0000gn/T/
2021-03-19 15:29:06,258 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2021-03-19 15:29:06,258 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
2021-03-19 15:29:06,258 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.arch=x86_64
2021-03-19 15:29:06,258 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.version=10.16
2021-03-19 15:29:06,258 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.name=steve
2021-03-19 15:29:06,258 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.home=/Users/steve
2021-03-19 15:29:06,258 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/Users/steve
2021-03-19 15:29:06,258 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.free=249MB
2021-03-19 15:29:06,258 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.max=4096MB
2021-03-19 15:29:06,258 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.total=256MB
2021-03-19 15:29:06,262 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=3000 watcher=app_kvServer.KVServer$1@7a8d20e7
2021-03-19 15:29:06,265 INFO  [Thread-0] org.apache.zookeeper.common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2021-03-19 15:29:06,277 INFO  [Thread-0] org.apache.zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes
2021-03-19 15:29:06,284 INFO  [Thread-0] org.apache.zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false
2021-03-19 15:29:06,297 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.SaslServerPrincipal: Canonicalized address to localhost
2021-03-19 15:29:06,299 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181.
2021-03-19 15:29:06,299 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)
2021-03-19 15:29:06,318 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Socket connection established, initiating session, client: /127.0.0.1:59863, server: localhost/127.0.0.1:2181
2021-03-19 15:29:06,319 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment request sent on localhost/127.0.0.1:2181
2021-03-19 15:29:06,348 TRACE [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxnSocket: readConnectResult 37 0x[0,0,0,0,0,0,f,ffffffa0,1,0,14,ffffffbd,52,70,1,ffffff93,0,0,0,10,77,fffffffa,39,31,ffffffb7,ffffff86,66,ffffff97,ffffffee,1d,17,ffffffeb,ffffffe9,5b,ffffffd1,27,0,]
2021-03-19 15:29:06,350 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, session id = 0x10014bd52700193, negotiated timeout = 4000
2021-03-19 15:29:06,352 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 15:29:06,352 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:None path:null
2021-03-19 15:29:06,380 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700193, packet:: clientPath:null serverPath:null finished:false header:: 1,1  replyHeader:: 1,1292,0  request:: '/keeper/server1,,v{s{31,s{'world,'anyone}}},1  response:: '/keeper/server1 
2021-03-19 15:29:06,384 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700193, packet:: clientPath:null serverPath:null finished:false header:: 2,3  replyHeader:: 2,1292,0  request:: '/keeper/server1,T  response:: s{1292,1292,1616182146352,1616182146352,0,0,0,72080397402374547,0,0,1292} 
2021-03-19 15:29:06,413 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got notification session id: 0x10014bd52700193
2021-03-19 15:29:06,413 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1 for session id 0x10014bd52700193
2021-03-19 15:29:06,415 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 15:29:06,415 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1
2021-03-19 15:29:06,416 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700193, packet:: clientPath:null serverPath:null finished:false header:: 3,5  replyHeader:: 3,1293,0  request:: '/keeper/server1,#3132372e302e302e313a3530303030,0  response:: s{1292,1293,1616182146352,1616182146385,1,0,0,72080397402374547,15,0,1292} 
2021-03-19 15:29:06,416 INFO  [Thread-0] root: Node created at: /keeper/server1
Starting commModule
2021-03-19 15:29:06,423 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:06,424 INFO  [Thread-0] root: Connected to localhost on port 59864
2021-03-19 15:29:06,433 INFO  [Thread-1] root: Message received by server -> Status: INIT_SERVER
received adminmsg
2021-03-19 15:29:06,434 INFO  [Thread-1] root: Message sent by server -> Status: INIT_SERVER_SUCCESS
2021-03-19 15:29:06,435 INFO  [Thread-1] root: Message received by server -> Status: START
received adminmsg
2021-03-19 15:29:06,435 INFO  [Thread-1] root: Message sent by server -> Status: START_SUCCESS
Starting commModule
2021-03-19 15:29:06,445 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:06,446 INFO  [Thread-0] root: Connected to localhost on port 59868
Starting commModule
2021-03-19 15:29:06,450 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:06,451 INFO  [Thread-0] root: Connected to localhost on port 59872
Starting commModule
2021-03-19 15:29:06,453 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:06,454 INFO  [Thread-0] root: Connected to localhost on port 59874
Starting commModule
2021-03-19 15:29:06,460 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:06,461 INFO  [Thread-0] root: Connected to localhost on port 59877
2021-03-19 15:29:06,462 INFO  [Thread-5] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 15:29:06,463 INFO  [Thread-5] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 15:29:06,466 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:06,466 INFO  [Thread-0] root: Connected to localhost on port 59879
Starting commModule
2021-03-19 15:29:06,469 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:06,470 INFO  [Thread-0] root: Connected to localhost on port 59883
Starting commModule
2021-03-19 15:29:06,470 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:06,471 INFO  [Thread-0] root: Connected to localhost on port 59884
2021-03-19 15:29:06,472 INFO  [Thread-8] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 15:29:06,477 DEBUG [Thread-8] root: Getting successors
2021-03-19 15:29:06,477 DEBUG [Thread-8] root: Got successors
2021-03-19 15:29:06,477 DEBUG [Thread-8] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50001
2021-03-19 15:29:06,480 INFO  [Thread-8] root: Client communication module connected
2021-03-19 15:29:06,480 INFO  [Thread-8] root: Client communication module connected
2021-03-19 15:29:06,480 DEBUG [Thread-8] root: {}
2021-03-19 15:29:06,481 INFO  [Thread-8] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 15:29:07,020 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:07,021 INFO  [Thread-0] root: Connected to localhost on port 59892
2021-03-19 15:29:07,022 INFO  [Thread-9] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 15:29:07,023 INFO  [Thread-9] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 15:29:07,026 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:07,027 INFO  [Thread-0] root: Connected to localhost on port 59894
Starting commModule
2021-03-19 15:29:07,032 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:07,032 INFO  [Thread-0] root: Connected to localhost on port 59899
2021-03-19 15:29:07,033 INFO  [Thread-11] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 15:29:07,034 DEBUG [Thread-11] root: Getting successors
2021-03-19 15:29:07,034 DEBUG [Thread-11] root: Got successors
2021-03-19 15:29:07,034 DEBUG [Thread-11] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 15:29:07,034 INFO  [Thread-11] root: Client communication module connected
2021-03-19 15:29:07,035 INFO  [Thread-11] root: Client communication module connected
2021-03-19 15:29:07,035 DEBUG [Thread-11] root: {}
2021-03-19 15:29:07,035 INFO  [Thread-11] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 15:29:07,044 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:07,044 INFO  [Thread-0] root: Connected to localhost on port 59906
2021-03-19 15:29:07,045 INFO  [Thread-12] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 15:29:07,046 INFO  [Thread-12] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 15:29:07,052 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:07,053 INFO  [Thread-0] root: Connected to localhost on port 59909
Starting commModule
2021-03-19 15:29:07,057 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:07,058 INFO  [Thread-0] root: Connected to localhost on port 59914
2021-03-19 15:29:07,058 INFO  [Thread-14] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 15:29:07,059 DEBUG [Thread-14] root: Getting successors
2021-03-19 15:29:07,059 DEBUG [Thread-14] root: Got successors
2021-03-19 15:29:07,059 DEBUG [Thread-14] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 15:29:07,059 INFO  [Thread-14] root: Client communication module connected
2021-03-19 15:29:07,060 INFO  [Thread-14] root: Client communication module connected
2021-03-19 15:29:07,060 DEBUG [Thread-14] root: {}
2021-03-19 15:29:07,060 INFO  [Thread-14] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 15:29:07,071 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:07,071 INFO  [Thread-0] root: Connected to localhost on port 59919
Starting commModule
2021-03-19 15:29:07,076 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:07,077 INFO  [Thread-0] root: Connected to localhost on port 59922
2021-03-19 15:29:07,077 INFO  [Thread-16] root: Message received by server -> Status: SHUTDOWN
received adminmsg
2021-03-19 15:29:07,077 DEBUG [Thread-16] root: Closing the program
2021-03-19 15:29:07,078 INFO  [Thread-16] root: Message sent by server -> Status: SHUTDOWN_SUCCESS
2021-03-19 15:29:07,078 ERROR [Thread-0] root: Error! Unable to establish connection. 

java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:458)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at app_kvServer.KVServer.run(KVServer.java:408)
2021-03-19 15:29:07,080 INFO  [Thread-0] root: Server stopped.
2021-03-19 15:29:07,080 INFO  [Thread-0] root: Clearing KV Storage...
2021-03-19 15:29:14,102 INFO  [Thread-0] root: Initialize server ...
2021-03-19 15:29:14,114 INFO  [Thread-0] root: Server listening on port: 50000
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.6.2--803c7f1a12f85978cb049af5e4ef23bd8b688715, built on 09/04/2020 12:44 GMT
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:host.name=localhost
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.version=11.0.10
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Azul Systems, Inc.
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.home=/Users/steve/Library/Java/JavaVirtualMachines/azul-11.0.10/Contents/Home
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/Users/steve/Desktop/UofT/year4/winter2021/ECE419/milestone3/m3-server.jar
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/Users/steve/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/kz/3gb57nkn6ks6_07_dtt5lqvr0000gn/T/
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.arch=x86_64
2021-03-19 15:29:14,133 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.version=10.16
2021-03-19 15:29:14,134 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.name=steve
2021-03-19 15:29:14,134 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.home=/Users/steve
2021-03-19 15:29:14,134 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/Users/steve
2021-03-19 15:29:14,134 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.free=249MB
2021-03-19 15:29:14,134 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.max=4096MB
2021-03-19 15:29:14,134 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.total=256MB
2021-03-19 15:29:14,136 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=3000 watcher=app_kvServer.KVServer$1@7a8d20e7
2021-03-19 15:29:14,140 INFO  [Thread-0] org.apache.zookeeper.common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2021-03-19 15:29:14,150 INFO  [Thread-0] org.apache.zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes
2021-03-19 15:29:14,156 INFO  [Thread-0] org.apache.zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false
2021-03-19 15:29:14,165 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.SaslServerPrincipal: Canonicalized address to localhost
2021-03-19 15:29:14,166 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181.
2021-03-19 15:29:14,166 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)
2021-03-19 15:29:14,180 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Socket connection established, initiating session, client: /0:0:0:0:0:0:0:1:59951, server: localhost/0:0:0:0:0:0:0:1:2181
2021-03-19 15:29:14,181 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment request sent on localhost/0:0:0:0:0:0:0:1:2181
2021-03-19 15:29:14,211 TRACE [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxnSocket: readConnectResult 37 0x[0,0,0,0,0,0,f,ffffffa0,1,0,14,ffffffbd,52,70,1,ffffff99,0,0,0,10,36,45,ffffffff,30,fffffff7,7a,1f,48,ffffff83,ffffffbb,1f,ffffff9d,2d,ffffffb4,ffffff9e,2a,0,]
2021-03-19 15:29:14,213 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2181, session id = 0x10014bd52700199, negotiated timeout = 4000
2021-03-19 15:29:14,217 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 15:29:14,217 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:None path:null
2021-03-19 15:29:14,245 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700199, packet:: clientPath:null serverPath:null finished:false header:: 1,1  replyHeader:: 1,1310,0  request:: '/keeper/server1,,v{s{31,s{'world,'anyone}}},1  response:: '/keeper/server1 
2021-03-19 15:29:14,250 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700199, packet:: clientPath:null serverPath:null finished:false header:: 2,3  replyHeader:: 2,1310,0  request:: '/keeper/server1,T  response:: s{1310,1310,1616182154217,1616182154217,0,0,0,72080397402374553,0,0,1310} 
2021-03-19 15:29:14,296 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got notification session id: 0x10014bd52700199
2021-03-19 15:29:14,298 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1 for session id 0x10014bd52700199
2021-03-19 15:29:14,299 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 15:29:14,299 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1
2021-03-19 15:29:14,300 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700199, packet:: clientPath:null serverPath:null finished:false header:: 3,5  replyHeader:: 3,1311,0  request:: '/keeper/server1,#3132372e302e302e313a3530303030,0  response:: s{1310,1311,1616182154217,1616182154251,1,0,0,72080397402374553,15,0,1310} 
2021-03-19 15:29:14,300 INFO  [Thread-0] root: Node created at: /keeper/server1
Starting commModule
2021-03-19 15:29:14,307 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:14,308 INFO  [Thread-0] root: Connected to localhost on port 59952
2021-03-19 15:29:14,316 INFO  [Thread-1] root: Message received by server -> Status: INIT_SERVER
received adminmsg
2021-03-19 15:29:14,317 INFO  [Thread-1] root: Message sent by server -> Status: INIT_SERVER_SUCCESS
2021-03-19 15:29:14,317 INFO  [Thread-1] root: Message received by server -> Status: START
received adminmsg
2021-03-19 15:29:14,318 INFO  [Thread-1] root: Message sent by server -> Status: START_SUCCESS
Starting commModule
2021-03-19 15:29:14,328 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:14,330 INFO  [Thread-0] root: Connected to localhost on port 59957
Starting commModule
2021-03-19 15:29:14,333 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:14,334 INFO  [Thread-0] root: Connected to localhost on port 59959
Starting commModule
2021-03-19 15:29:14,336 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:14,337 INFO  [Thread-0] root: Connected to localhost on port 59962
Starting commModule
2021-03-19 15:29:14,344 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:14,346 INFO  [Thread-0] root: Connected to localhost on port 59965
2021-03-19 15:29:14,346 INFO  [Thread-5] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 15:29:14,347 INFO  [Thread-5] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 15:29:14,352 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:14,353 INFO  [Thread-0] root: Connected to localhost on port 59968
Starting commModule
2021-03-19 15:29:14,355 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:14,356 INFO  [Thread-0] root: Connected to localhost on port 59970
Starting commModule
2021-03-19 15:29:14,357 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:14,357 INFO  [Thread-0] root: Connected to localhost on port 59972
2021-03-19 15:29:14,358 INFO  [Thread-8] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 15:29:14,363 DEBUG [Thread-8] root: Getting successors
2021-03-19 15:29:14,364 DEBUG [Thread-8] root: Got successors
2021-03-19 15:29:14,364 DEBUG [Thread-8] root: Propagating to: 127.0.0.1:50002 127.0.0.1:50001
2021-03-19 15:29:14,366 INFO  [Thread-8] root: Client communication module connected
2021-03-19 15:29:14,367 INFO  [Thread-8] root: Client communication module connected
2021-03-19 15:29:14,367 DEBUG [Thread-8] root: {}
2021-03-19 15:29:14,367 INFO  [Thread-8] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 15:29:15,018 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:15,018 INFO  [Thread-0] root: Connected to localhost on port 59980
2021-03-19 15:29:15,019 INFO  [Thread-9] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 15:29:15,020 INFO  [Thread-9] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 15:29:15,025 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:15,029 INFO  [Thread-0] root: Connected to localhost on port 59983
Starting commModule
2021-03-19 15:29:15,034 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:15,036 INFO  [Thread-0] root: Connected to localhost on port 59985
Starting commModule
2021-03-19 15:29:15,039 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:15,041 INFO  [Thread-0] root: Connected to localhost on port 59987
2021-03-19 15:29:15,042 INFO  [Thread-12] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 15:29:15,042 DEBUG [Thread-12] root: Getting successors
2021-03-19 15:29:15,042 DEBUG [Thread-12] root: Got successors
2021-03-19 15:29:15,042 DEBUG [Thread-12] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 15:29:15,043 INFO  [Thread-12] root: Client communication module connected
2021-03-19 15:29:15,045 INFO  [Thread-12] root: Client communication module connected
2021-03-19 15:29:15,045 DEBUG [Thread-12] root: {}
2021-03-19 15:29:15,045 INFO  [Thread-12] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 15:29:15,071 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:15,072 INFO  [Thread-0] root: Connected to localhost on port 59994
2021-03-19 15:29:15,073 INFO  [Thread-13] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 15:29:15,074 INFO  [Thread-13] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 15:29:15,081 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:15,082 INFO  [Thread-0] root: Connected to localhost on port 59998
Starting commModule
2021-03-19 15:29:15,085 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:15,086 INFO  [Thread-0] root: Connected to localhost on port 60000
Starting commModule
2021-03-19 15:29:15,087 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:15,088 INFO  [Thread-0] root: Connected to localhost on port 60002
2021-03-19 15:29:15,089 INFO  [Thread-16] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 15:29:15,090 DEBUG [Thread-16] root: Getting successors
2021-03-19 15:29:15,090 DEBUG [Thread-16] root: Got successors
2021-03-19 15:29:15,090 DEBUG [Thread-16] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 15:29:15,091 INFO  [Thread-16] root: Client communication module connected
2021-03-19 15:29:15,091 INFO  [Thread-16] root: Client communication module connected
2021-03-19 15:29:15,092 DEBUG [Thread-16] root: {}
2021-03-19 15:29:15,092 INFO  [Thread-16] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 15:29:15,116 INFO  [Thread-0] root: Server communication module connected
2021-03-19 15:29:15,117 INFO  [Thread-17] root: Message received by server -> Status: SHUTDOWN
received adminmsg
2021-03-19 15:29:15,117 INFO  [Thread-0] root: Connected to localhost on port 60010
2021-03-19 15:29:15,117 DEBUG [Thread-17] root: Closing the program
2021-03-19 15:29:15,117 INFO  [Thread-17] root: Message sent by server -> Status: SHUTDOWN_SUCCESS
2021-03-19 15:29:15,118 ERROR [Thread-0] root: Error! Unable to establish connection. 

java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:458)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at app_kvServer.KVServer.run(KVServer.java:408)
2021-03-19 15:29:15,120 INFO  [Thread-0] root: Server stopped.
2021-03-19 15:29:15,120 INFO  [Thread-0] root: Clearing KV Storage...
2021-03-19 16:11:44,068 INFO  [Thread-0] root: Initialize server ...
2021-03-19 16:11:44,080 INFO  [Thread-0] root: Server listening on port: 50000
2021-03-19 16:11:44,103 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.6.2--803c7f1a12f85978cb049af5e4ef23bd8b688715, built on 09/04/2020 12:44 GMT
2021-03-19 16:11:44,103 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:host.name=localhost
2021-03-19 16:11:44,103 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.version=11.0.10
2021-03-19 16:11:44,103 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Azul Systems, Inc.
2021-03-19 16:11:44,103 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.home=/Users/steve/Library/Java/JavaVirtualMachines/azul-11.0.10/Contents/Home
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/Users/steve/Desktop/UofT/year4/winter2021/ECE419/milestone3/m3-server.jar
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/Users/steve/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/kz/3gb57nkn6ks6_07_dtt5lqvr0000gn/T/
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.arch=x86_64
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.version=10.16
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.name=steve
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.home=/Users/steve
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/Users/steve
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.free=249MB
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.max=4096MB
2021-03-19 16:11:44,104 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.total=256MB
2021-03-19 16:11:44,107 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=3000 watcher=app_kvServer.KVServer$1@12b3f602
2021-03-19 16:11:44,110 INFO  [Thread-0] org.apache.zookeeper.common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2021-03-19 16:11:44,121 INFO  [Thread-0] org.apache.zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes
2021-03-19 16:11:44,128 INFO  [Thread-0] org.apache.zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false
2021-03-19 16:11:44,137 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.SaslServerPrincipal: Canonicalized address to localhost
2021-03-19 16:11:44,138 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2181.
2021-03-19 16:11:44,138 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)
2021-03-19 16:11:44,151 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Socket connection established, initiating session, client: /0:0:0:0:0:0:0:1:61011, server: localhost/0:0:0:0:0:0:0:1:2181
2021-03-19 16:11:44,152 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment request sent on localhost/0:0:0:0:0:0:0:1:2181
2021-03-19 16:11:44,182 TRACE [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxnSocket: readConnectResult 37 0x[0,0,0,0,0,0,f,ffffffa0,1,0,14,ffffffbd,52,70,1,ffffffbc,0,0,0,10,ffffffd2,ffffffca,31,30,ffffffd6,ffffffd1,ffffffa6,ffffffb2,a,ffffffe3,3d,ffffff8c,1c,69,6d,34,0,]
2021-03-19 16:11:44,184 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2181, session id = 0x10014bd527001bc, negotiated timeout = 4000
2021-03-19 16:11:44,188 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 16:11:44,188 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:None path:null
2021-03-19 16:11:44,217 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd527001bc, packet:: clientPath:null serverPath:null finished:false header:: 1,1  replyHeader:: 1,1427,0  request:: '/keeper/server1,,v{s{31,s{'world,'anyone}}},1  response:: '/keeper/server1 
2021-03-19 16:11:44,221 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd527001bc, packet:: clientPath:null serverPath:null finished:false header:: 2,3  replyHeader:: 2,1427,0  request:: '/keeper/server1,T  response:: s{1427,1427,1616184704188,1616184704188,0,0,0,72080397402374588,0,0,1427} 
2021-03-19 16:11:44,248 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got notification session id: 0x10014bd527001bc
2021-03-19 16:11:44,249 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1 for session id 0x10014bd527001bc
2021-03-19 16:11:44,250 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 16:11:44,250 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1
2021-03-19 16:11:44,251 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd527001bc, packet:: clientPath:null serverPath:null finished:false header:: 3,5  replyHeader:: 3,1428,0  request:: '/keeper/server1,#3132372e302e302e313a3530303030,0  response:: s{1427,1428,1616184704188,1616184704222,1,0,0,72080397402374588,15,0,1427} 
2021-03-19 16:11:44,251 INFO  [Thread-0] root: Node created at: /keeper/server1
Starting commModule
2021-03-19 16:11:44,258 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,258 INFO  [Thread-0] root: Connected to localhost on port 61012
2021-03-19 16:11:44,266 INFO  [Thread-1] root: Message received by server -> Status: INIT_SERVER
received adminmsg
2021-03-19 16:11:44,267 INFO  [Thread-1] root: Message sent by server -> Status: INIT_SERVER_SUCCESS
2021-03-19 16:11:44,267 INFO  [Thread-1] root: Message received by server -> Status: START
received adminmsg
2021-03-19 16:11:44,267 INFO  [Thread-1] root: Message sent by server -> Status: START_SUCCESS
Starting commModule
2021-03-19 16:11:44,276 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,277 INFO  [Thread-0] root: Connected to localhost on port 61017
Starting commModule
2021-03-19 16:11:44,279 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,280 INFO  [Thread-0] root: Connected to localhost on port 61019
Starting commModule
2021-03-19 16:11:44,282 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,283 INFO  [Thread-0] root: Connected to localhost on port 61022
Starting commModule
2021-03-19 16:11:44,288 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,289 INFO  [Thread-0] root: Connected to localhost on port 61025
2021-03-19 16:11:44,290 INFO  [Thread-5] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 16:11:44,291 INFO  [Thread-5] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 16:11:44,293 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,294 INFO  [Thread-0] root: Connected to localhost on port 61028
Starting commModule
2021-03-19 16:11:44,296 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,297 INFO  [Thread-0] root: Connected to localhost on port 61030
Starting commModule
2021-03-19 16:11:44,298 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,298 INFO  [Thread-0] root: Connected to localhost on port 61032
2021-03-19 16:11:44,299 INFO  [Thread-8] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 16:11:44,305 DEBUG [Thread-8] root: Getting successors
2021-03-19 16:11:44,305 DEBUG [Thread-8] root: Got successors
2021-03-19 16:11:44,305 DEBUG [Thread-8] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 16:11:44,307 INFO  [Thread-8] root: Client communication module connected
2021-03-19 16:11:44,308 INFO  [Thread-8] root: Client communication module connected
2021-03-19 16:11:44,308 DEBUG [Thread-8] root: {}
2021-03-19 16:11:44,308 INFO  [Thread-8] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 16:11:44,813 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,814 INFO  [Thread-0] root: Connected to localhost on port 61040
2021-03-19 16:11:44,815 INFO  [Thread-9] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 16:11:44,815 INFO  [Thread-9] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 16:11:44,822 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,823 INFO  [Thread-0] root: Connected to localhost on port 61046
Starting commModule
2021-03-19 16:11:44,823 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,823 INFO  [Thread-0] root: Connected to localhost on port 61047
2021-03-19 16:11:44,824 INFO  [Thread-11] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 16:11:44,824 DEBUG [Thread-11] root: Getting successors
2021-03-19 16:11:44,824 DEBUG [Thread-11] root: Got successors
2021-03-19 16:11:44,824 DEBUG [Thread-11] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 16:11:44,825 INFO  [Thread-11] root: Client communication module connected
2021-03-19 16:11:44,825 INFO  [Thread-11] root: Client communication module connected
2021-03-19 16:11:44,825 DEBUG [Thread-11] root: {}
2021-03-19 16:11:44,826 INFO  [Thread-11] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 16:11:44,826 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,827 INFO  [Thread-0] root: Connected to localhost on port 61050
2021-03-19 16:11:44,827 INFO  [Thread-12] root: Message received by server -> Status: MOVE_DATA
received adminmsg
2021-03-19 16:11:44,827 DEBUG [Thread-12] root: Input data: 
2021-03-19 16:11:44,827 DEBUG [Thread-12] root: b3638a32c297f43aa37e63bbd839fc7f:dcee0277eb13b76434e8dcd31a387709
2021-03-19 16:11:44,827 DEBUG [Thread-12] root: 127.0.0.1:50001
2021-03-19 16:11:44,827 INFO  [Thread-12] root: Client communication module connected
2021-03-19 16:11:44,827 DEBUG [Thread-12] root: Host: 127.0.0.1
2021-03-19 16:11:44,828 DEBUG [Thread-12] root: Port: 50001
2021-03-19 16:11:44,828 DEBUG [Thread-12] root: Range: b3638a32c297f43aa37e63bbd839fc7f:dcee0277eb13b76434e8dcd31a387709
2021-03-19 16:11:44,828 DEBUG [Thread-12] root: Starting flush data
2021-03-19 16:11:44,828 DEBUG [Thread-12] root: Finished flush data
2021-03-19 16:11:44,828 DEBUG [Thread-12] root: Closing conn
2021-03-19 16:11:44,828 INFO  [Thread-12] root: Connection closed!
2021-03-19 16:11:44,828 DEBUG [Thread-12] root: Closed conn
2021-03-19 16:11:44,828 INFO  [Thread-12] root: Message sent by server -> Status: MOVE_DATA_SUCCESS
Starting commModule
2021-03-19 16:11:44,833 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,834 INFO  [Thread-0] root: Connected to localhost on port 61054
2021-03-19 16:11:44,835 INFO  [Thread-13] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 16:11:44,835 INFO  [Thread-13] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 16:11:44,845 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,846 INFO  [Thread-0] root: Connected to localhost on port 61061
Starting commModule
2021-03-19 16:11:44,846 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,847 INFO  [Thread-0] root: Connected to localhost on port 61062
2021-03-19 16:11:44,848 INFO  [Thread-15] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 16:11:44,848 DEBUG [Thread-15] root: Getting successors
2021-03-19 16:11:44,848 DEBUG [Thread-15] root: Got successors
2021-03-19 16:11:44,848 DEBUG [Thread-15] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 16:11:44,849 INFO  [Thread-15] root: Client communication module connected
2021-03-19 16:11:44,849 INFO  [Thread-15] root: Client communication module connected
2021-03-19 16:11:44,849 DEBUG [Thread-15] root: {}
2021-03-19 16:11:44,849 INFO  [Thread-15] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 16:11:44,859 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,860 INFO  [Thread-0] root: Connected to localhost on port 61066
Starting commModule
2021-03-19 16:11:44,865 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:44,866 INFO  [Thread-0] root: Connected to localhost on port 61070
2021-03-19 16:11:44,866 INFO  [Thread-17] root: Message received by server -> Status: SHUTDOWN
received adminmsg
2021-03-19 16:11:44,866 DEBUG [Thread-17] root: Closing the program
2021-03-19 16:11:44,866 INFO  [Thread-17] root: Message sent by server -> Status: SHUTDOWN_SUCCESS
2021-03-19 16:11:44,867 ERROR [Thread-0] root: Error! Unable to establish connection. 

java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:458)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at app_kvServer.KVServer.run(KVServer.java:408)
2021-03-19 16:11:44,869 INFO  [Thread-0] root: Server stopped.
2021-03-19 16:11:44,869 INFO  [Thread-0] root: Clearing KV Storage...
2021-03-19 16:11:52,594 INFO  [Thread-0] root: Initialize server ...
2021-03-19 16:11:52,606 INFO  [Thread-0] root: Server listening on port: 50000
2021-03-19 16:11:52,624 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.6.2--803c7f1a12f85978cb049af5e4ef23bd8b688715, built on 09/04/2020 12:44 GMT
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:host.name=localhost
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.version=11.0.10
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Azul Systems, Inc.
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.home=/Users/steve/Library/Java/JavaVirtualMachines/azul-11.0.10/Contents/Home
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/Users/steve/Desktop/UofT/year4/winter2021/ECE419/milestone3/m3-server.jar
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/Users/steve/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/kz/3gb57nkn6ks6_07_dtt5lqvr0000gn/T/
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.arch=x86_64
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.version=10.16
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.name=steve
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.home=/Users/steve
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/Users/steve
2021-03-19 16:11:52,625 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.free=249MB
2021-03-19 16:11:52,626 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.max=4096MB
2021-03-19 16:11:52,626 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.total=256MB
2021-03-19 16:11:52,628 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=3000 watcher=app_kvServer.KVServer$1@24877fd5
2021-03-19 16:11:52,631 INFO  [Thread-0] org.apache.zookeeper.common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2021-03-19 16:11:52,642 INFO  [Thread-0] org.apache.zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes
2021-03-19 16:11:52,648 INFO  [Thread-0] org.apache.zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false
2021-03-19 16:11:52,656 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.SaslServerPrincipal: Canonicalized address to localhost
2021-03-19 16:11:52,657 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181.
2021-03-19 16:11:52,657 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)
2021-03-19 16:11:52,672 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Socket connection established, initiating session, client: /127.0.0.1:61100, server: localhost/127.0.0.1:2181
2021-03-19 16:11:52,673 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment request sent on localhost/127.0.0.1:2181
2021-03-19 16:11:52,701 TRACE [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxnSocket: readConnectResult 37 0x[0,0,0,0,0,0,f,ffffffa0,1,0,14,ffffffbd,52,70,1,ffffffc2,0,0,0,10,5c,2f,6a,2f,14,ffffffdd,4e,ffffffd8,ffffff9c,ffffffc7,fffffff4,4f,38,ffffff95,27,71,0,]
2021-03-19 16:11:52,704 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, session id = 0x10014bd527001c2, negotiated timeout = 4000
2021-03-19 16:11:52,707 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 16:11:52,707 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:None path:null
2021-03-19 16:11:52,736 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd527001c2, packet:: clientPath:null serverPath:null finished:false header:: 1,1  replyHeader:: 1,1445,0  request:: '/keeper/server1,,v{s{31,s{'world,'anyone}}},1  response:: '/keeper/server1 
2021-03-19 16:11:52,740 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd527001c2, packet:: clientPath:null serverPath:null finished:false header:: 2,3  replyHeader:: 2,1445,0  request:: '/keeper/server1,T  response:: s{1445,1445,1616184712707,1616184712707,0,0,0,72080397402374594,0,0,1445} 
2021-03-19 16:11:52,767 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got notification session id: 0x10014bd527001c2
2021-03-19 16:11:52,769 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1 for session id 0x10014bd527001c2
2021-03-19 16:11:52,770 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 16:11:52,770 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1
2021-03-19 16:11:52,772 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd527001c2, packet:: clientPath:null serverPath:null finished:false header:: 3,5  replyHeader:: 3,1446,0  request:: '/keeper/server1,#3132372e302e302e313a3530303030,0  response:: s{1445,1446,1616184712707,1616184712741,1,0,0,72080397402374594,15,0,1445} 
2021-03-19 16:11:52,772 INFO  [Thread-0] root: Node created at: /keeper/server1
Starting commModule
2021-03-19 16:11:52,783 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:52,783 INFO  [Thread-0] root: Connected to localhost on port 61101
2021-03-19 16:11:52,794 INFO  [Thread-1] root: Message received by server -> Status: INIT_SERVER
received adminmsg
2021-03-19 16:11:52,795 INFO  [Thread-1] root: Message sent by server -> Status: INIT_SERVER_SUCCESS
2021-03-19 16:11:52,796 INFO  [Thread-1] root: Message received by server -> Status: START
received adminmsg
2021-03-19 16:11:52,797 INFO  [Thread-1] root: Message sent by server -> Status: START_SUCCESS
Starting commModule
2021-03-19 16:11:52,809 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:52,810 INFO  [Thread-0] root: Connected to localhost on port 61106
Starting commModule
2021-03-19 16:11:52,814 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:52,815 INFO  [Thread-0] root: Connected to localhost on port 61108
Starting commModule
2021-03-19 16:11:52,818 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:52,820 INFO  [Thread-0] root: Connected to localhost on port 61111
Starting commModule
2021-03-19 16:11:52,830 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:52,831 INFO  [Thread-0] root: Connected to localhost on port 61114
2021-03-19 16:11:52,833 INFO  [Thread-5] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 16:11:52,835 INFO  [Thread-5] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 16:11:52,843 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:52,844 INFO  [Thread-0] root: Connected to localhost on port 61117
Starting commModule
2021-03-19 16:11:52,847 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:52,848 INFO  [Thread-0] root: Connected to localhost on port 61119
Starting commModule
2021-03-19 16:11:52,849 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:52,849 INFO  [Thread-0] root: Connected to localhost on port 61121
2021-03-19 16:11:52,850 INFO  [Thread-8] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 16:11:52,857 DEBUG [Thread-8] root: Getting successors
2021-03-19 16:11:52,857 DEBUG [Thread-8] root: Got successors
2021-03-19 16:11:52,858 DEBUG [Thread-8] root: Propagating to: 127.0.0.1:50002 127.0.0.1:50001
2021-03-19 16:11:52,862 INFO  [Thread-8] root: Client communication module connected
2021-03-19 16:11:52,863 INFO  [Thread-8] root: Client communication module connected
2021-03-19 16:11:52,864 DEBUG [Thread-8] root: {}
2021-03-19 16:11:52,864 INFO  [Thread-8] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 16:11:53,392 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:53,393 INFO  [Thread-0] root: Connected to localhost on port 61129
2021-03-19 16:11:53,394 INFO  [Thread-9] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 16:11:53,394 INFO  [Thread-9] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 16:11:53,398 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:53,398 INFO  [Thread-0] root: Connected to localhost on port 61132
Starting commModule
2021-03-19 16:11:53,401 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:53,401 INFO  [Thread-0] root: Connected to localhost on port 61134
Starting commModule
2021-03-19 16:11:53,402 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:53,402 INFO  [Thread-0] root: Connected to localhost on port 61136
2021-03-19 16:11:53,403 INFO  [Thread-12] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 16:11:53,403 DEBUG [Thread-12] root: Getting successors
2021-03-19 16:11:53,403 DEBUG [Thread-12] root: Got successors
2021-03-19 16:11:53,404 DEBUG [Thread-12] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 16:11:53,404 INFO  [Thread-12] root: Client communication module connected
2021-03-19 16:11:53,404 INFO  [Thread-12] root: Client communication module connected
2021-03-19 16:11:53,404 DEBUG [Thread-12] root: {}
2021-03-19 16:11:53,405 INFO  [Thread-12] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 16:11:53,413 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:53,413 INFO  [Thread-0] root: Connected to localhost on port 61143
2021-03-19 16:11:53,414 INFO  [Thread-13] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 16:11:53,415 INFO  [Thread-13] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 16:11:53,421 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:53,421 INFO  [Thread-0] root: Connected to localhost on port 61147
Starting commModule
2021-03-19 16:11:53,424 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:53,424 INFO  [Thread-0] root: Connected to localhost on port 61149
Starting commModule
2021-03-19 16:11:53,425 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:53,426 INFO  [Thread-0] root: Connected to localhost on port 61151
2021-03-19 16:11:53,427 INFO  [Thread-16] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 16:11:53,427 DEBUG [Thread-16] root: Getting successors
2021-03-19 16:11:53,427 DEBUG [Thread-16] root: Got successors
2021-03-19 16:11:53,427 DEBUG [Thread-16] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 16:11:53,427 INFO  [Thread-16] root: Client communication module connected
2021-03-19 16:11:53,428 INFO  [Thread-16] root: Client communication module connected
2021-03-19 16:11:53,428 DEBUG [Thread-16] root: {}
2021-03-19 16:11:53,428 INFO  [Thread-16] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 16:11:53,449 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:11:53,451 INFO  [Thread-0] root: Connected to localhost on port 61159
2021-03-19 16:11:53,451 INFO  [Thread-17] root: Message received by server -> Status: SHUTDOWN
received adminmsg
2021-03-19 16:11:53,451 DEBUG [Thread-17] root: Closing the program
2021-03-19 16:11:53,452 INFO  [Thread-17] root: Message sent by server -> Status: SHUTDOWN_SUCCESS
2021-03-19 16:11:53,453 ERROR [Thread-0] root: Error! Unable to establish connection. 

java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:458)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at app_kvServer.KVServer.run(KVServer.java:408)
2021-03-19 16:11:53,458 INFO  [Thread-0] root: Server stopped.
2021-03-19 16:11:53,458 INFO  [Thread-0] root: Clearing KV Storage...
2021-03-19 16:19:02,144 INFO  [Thread-0] root: Initialize server ...
2021-03-19 16:19:02,158 INFO  [Thread-0] root: Server listening on port: 50000
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.6.2--803c7f1a12f85978cb049af5e4ef23bd8b688715, built on 09/04/2020 12:44 GMT
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:host.name=localhost
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.version=11.0.10
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Azul Systems, Inc.
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.home=/Users/steve/Library/Java/JavaVirtualMachines/azul-11.0.10/Contents/Home
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/Users/steve/Desktop/UofT/year4/winter2021/ECE419/milestone3/m3-server.jar
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/Users/steve/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/kz/3gb57nkn6ks6_07_dtt5lqvr0000gn/T/
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.arch=x86_64
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.version=10.16
2021-03-19 16:19:02,182 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.name=steve
2021-03-19 16:19:02,183 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.home=/Users/steve
2021-03-19 16:19:02,183 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/Users/steve
2021-03-19 16:19:02,183 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.free=249MB
2021-03-19 16:19:02,183 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.max=4096MB
2021-03-19 16:19:02,183 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.total=256MB
2021-03-19 16:19:02,186 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=3000 watcher=app_kvServer.KVServer$1@48a00dff
2021-03-19 16:19:02,189 INFO  [Thread-0] org.apache.zookeeper.common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2021-03-19 16:19:02,201 INFO  [Thread-0] org.apache.zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes
2021-03-19 16:19:02,209 INFO  [Thread-0] org.apache.zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false
2021-03-19 16:19:02,218 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.SaslServerPrincipal: Canonicalized address to localhost
2021-03-19 16:19:02,220 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181.
2021-03-19 16:19:02,220 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)
2021-03-19 16:19:02,236 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Socket connection established, initiating session, client: /127.0.0.1:62849, server: localhost/127.0.0.1:2181
2021-03-19 16:19:02,237 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment request sent on localhost/127.0.0.1:2181
2021-03-19 16:19:02,266 TRACE [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxnSocket: readConnectResult 37 0x[0,0,0,0,0,0,f,ffffffa0,1,0,14,ffffffbd,52,70,1,fffffffa,0,0,0,10,26,49,ffffffdd,2e,13,fffffff4,3d,4d,ffffff99,e,ffffffa3,61,f,69,14,ffffffab,0,]
2021-03-19 16:19:02,268 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, session id = 0x10014bd527001fa, negotiated timeout = 4000
2021-03-19 16:19:02,271 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 16:19:02,271 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:None path:null
2021-03-19 16:19:02,299 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd527001fa, packet:: clientPath:null serverPath:null finished:false header:: 1,1  replyHeader:: 1,1641,0  request:: '/keeper/server1,,v{s{31,s{'world,'anyone}}},1  response:: '/keeper/server1 
2021-03-19 16:19:02,303 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd527001fa, packet:: clientPath:null serverPath:null finished:false header:: 2,3  replyHeader:: 2,1641,0  request:: '/keeper/server1,T  response:: s{1641,1641,1616185142271,1616185142271,0,0,0,72080397402374650,0,0,1641} 
2021-03-19 16:19:02,329 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got notification session id: 0x10014bd527001fa
2021-03-19 16:19:02,330 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1 for session id 0x10014bd527001fa
2021-03-19 16:19:02,331 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 16:19:02,331 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1
2021-03-19 16:19:02,332 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd527001fa, packet:: clientPath:null serverPath:null finished:false header:: 3,5  replyHeader:: 3,1642,0  request:: '/keeper/server1,#3132372e302e302e313a3530303030,0  response:: s{1641,1642,1616185142271,1616185142304,1,0,0,72080397402374650,15,0,1641} 
2021-03-19 16:19:02,332 INFO  [Thread-0] root: Node created at: /keeper/server1
Starting commModule
2021-03-19 16:19:02,338 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,339 INFO  [Thread-0] root: Connected to localhost on port 62851
2021-03-19 16:19:02,347 INFO  [Thread-1] root: Message received by server -> Status: INIT_SERVER
received adminmsg
2021-03-19 16:19:02,348 INFO  [Thread-1] root: Message sent by server -> Status: INIT_SERVER_SUCCESS
2021-03-19 16:19:02,348 INFO  [Thread-1] root: Message received by server -> Status: START
received adminmsg
2021-03-19 16:19:02,348 INFO  [Thread-1] root: Message sent by server -> Status: START_SUCCESS
Starting commModule
2021-03-19 16:19:02,356 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,357 INFO  [Thread-0] root: Connected to localhost on port 62855
Starting commModule
2021-03-19 16:19:02,360 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,361 INFO  [Thread-0] root: Connected to localhost on port 62859
Starting commModule
2021-03-19 16:19:02,362 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,363 INFO  [Thread-0] root: Connected to localhost on port 62861
Starting commModule
2021-03-19 16:19:02,370 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,371 INFO  [Thread-0] root: Connected to localhost on port 62864
2021-03-19 16:19:02,371 INFO  [Thread-5] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 16:19:02,372 INFO  [Thread-5] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 16:19:02,375 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,376 INFO  [Thread-0] root: Connected to localhost on port 62866
Starting commModule
2021-03-19 16:19:02,379 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,380 INFO  [Thread-0] root: Connected to localhost on port 62870
Starting commModule
2021-03-19 16:19:02,380 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,380 INFO  [Thread-0] root: Connected to localhost on port 62871
2021-03-19 16:19:02,381 INFO  [Thread-8] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 16:19:02,386 DEBUG [Thread-8] root: Getting successors
2021-03-19 16:19:02,386 DEBUG [Thread-8] root: Got successors
2021-03-19 16:19:02,386 DEBUG [Thread-8] root: Propagating to: 127.0.0.1:50002 127.0.0.1:50001
2021-03-19 16:19:02,389 INFO  [Thread-8] root: Client communication module connected
2021-03-19 16:19:02,389 INFO  [Thread-8] root: Client communication module connected
2021-03-19 16:19:02,389 DEBUG [Thread-8] root: {}
2021-03-19 16:19:02,390 INFO  [Thread-8] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 16:19:02,953 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,954 INFO  [Thread-0] root: Connected to localhost on port 62879
2021-03-19 16:19:02,955 INFO  [Thread-9] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 16:19:02,956 INFO  [Thread-9] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 16:19:02,959 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,960 INFO  [Thread-0] root: Connected to localhost on port 62881
Starting commModule
2021-03-19 16:19:02,964 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,965 INFO  [Thread-0] root: Connected to localhost on port 62885
Starting commModule
2021-03-19 16:19:02,965 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,966 INFO  [Thread-0] root: Connected to localhost on port 62886
2021-03-19 16:19:02,967 INFO  [Thread-12] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 16:19:02,967 DEBUG [Thread-12] root: Getting successors
2021-03-19 16:19:02,967 DEBUG [Thread-12] root: Got successors
2021-03-19 16:19:02,967 DEBUG [Thread-12] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 16:19:02,968 INFO  [Thread-12] root: Client communication module connected
2021-03-19 16:19:02,968 INFO  [Thread-12] root: Client communication module connected
2021-03-19 16:19:02,968 DEBUG [Thread-12] root: {}
2021-03-19 16:19:02,969 INFO  [Thread-12] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 16:19:02,977 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,978 INFO  [Thread-0] root: Connected to localhost on port 62893
2021-03-19 16:19:02,979 INFO  [Thread-13] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 16:19:02,979 INFO  [Thread-13] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 16:19:02,985 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,986 INFO  [Thread-0] root: Connected to localhost on port 62896
Starting commModule
2021-03-19 16:19:02,990 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,990 INFO  [Thread-0] root: Connected to localhost on port 62900
Starting commModule
2021-03-19 16:19:02,991 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:02,991 INFO  [Thread-0] root: Connected to localhost on port 62901
2021-03-19 16:19:02,992 INFO  [Thread-16] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 16:19:02,992 DEBUG [Thread-16] root: Getting successors
2021-03-19 16:19:02,992 DEBUG [Thread-16] root: Got successors
2021-03-19 16:19:02,992 DEBUG [Thread-16] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 16:19:02,993 INFO  [Thread-16] root: Client communication module connected
2021-03-19 16:19:02,993 INFO  [Thread-16] root: Client communication module connected
2021-03-19 16:19:02,994 DEBUG [Thread-16] root: {}
2021-03-19 16:19:02,994 INFO  [Thread-16] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 16:19:03,012 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:03,013 INFO  [Thread-0] root: Connected to localhost on port 62909
2021-03-19 16:19:03,013 INFO  [Thread-17] root: Message received by server -> Status: SHUTDOWN
received adminmsg
2021-03-19 16:19:03,013 DEBUG [Thread-17] root: Closing the program
2021-03-19 16:19:03,014 INFO  [Thread-17] root: Message sent by server -> Status: SHUTDOWN_SUCCESS
2021-03-19 16:19:03,014 ERROR [Thread-0] root: Error! Unable to establish connection. 

java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:458)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at app_kvServer.KVServer.run(KVServer.java:408)
2021-03-19 16:19:03,017 INFO  [Thread-0] root: Server stopped.
2021-03-19 16:19:03,017 INFO  [Thread-0] root: Clearing KV Storage...
2021-03-19 16:19:10,801 INFO  [Thread-0] root: Initialize server ...
2021-03-19 16:19:10,817 INFO  [Thread-0] root: Server listening on port: 50000
2021-03-19 16:19:10,847 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:zookeeper.version=3.6.2--803c7f1a12f85978cb049af5e4ef23bd8b688715, built on 09/04/2020 12:44 GMT
2021-03-19 16:19:10,848 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:host.name=localhost
2021-03-19 16:19:10,848 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.version=11.0.10
2021-03-19 16:19:10,848 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.vendor=Azul Systems, Inc.
2021-03-19 16:19:10,848 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.home=/Users/steve/Library/Java/JavaVirtualMachines/azul-11.0.10/Contents/Home
2021-03-19 16:19:10,848 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.class.path=/Users/steve/Desktop/UofT/year4/winter2021/ECE419/milestone3/m3-server.jar
2021-03-19 16:19:10,848 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.library.path=/Users/steve/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2021-03-19 16:19:10,848 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/var/folders/kz/3gb57nkn6ks6_07_dtt5lqvr0000gn/T/
2021-03-19 16:19:10,848 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
2021-03-19 16:19:10,849 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.name=Mac OS X
2021-03-19 16:19:10,849 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.arch=x86_64
2021-03-19 16:19:10,849 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.version=10.16
2021-03-19 16:19:10,849 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.name=steve
2021-03-19 16:19:10,849 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.home=/Users/steve
2021-03-19 16:19:10,849 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:user.dir=/Users/steve
2021-03-19 16:19:10,849 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.free=249MB
2021-03-19 16:19:10,850 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.max=4096MB
2021-03-19 16:19:10,850 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Client environment:os.memory.total=256MB
2021-03-19 16:19:10,855 INFO  [Thread-0] org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=localhost:2181 sessionTimeout=3000 watcher=app_kvServer.KVServer$1@777d7b53
2021-03-19 16:19:10,861 INFO  [Thread-0] org.apache.zookeeper.common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2021-03-19 16:19:10,880 INFO  [Thread-0] org.apache.zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes
2021-03-19 16:19:10,888 INFO  [Thread-0] org.apache.zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false
2021-03-19 16:19:10,900 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.SaslServerPrincipal: Canonicalized address to localhost
2021-03-19 16:19:10,901 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Opening socket connection to server localhost/127.0.0.1:2181.
2021-03-19 16:19:10,901 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)
2021-03-19 16:19:10,920 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Socket connection established, initiating session, client: /127.0.0.1:62963, server: localhost/127.0.0.1:2181
2021-03-19 16:19:10,921 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment request sent on localhost/127.0.0.1:2181
2021-03-19 16:19:10,953 TRACE [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxnSocket: readConnectResult 37 0x[0,0,0,0,0,0,f,ffffffa0,1,0,14,ffffffbd,52,70,2,1,0,0,0,10,ffffffa8,10,44,1c,ffffffd2,ffffff87,ffffffa2,7c,7c,2d,ffffffc4,ffffffe1,7e,ffffffdf,21,5b,0,]
2021-03-19 16:19:10,955 INFO  [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Session establishment complete on server localhost/127.0.0.1:2181, session id = 0x10014bd52700201, negotiated timeout = 4000
2021-03-19 16:19:10,958 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 16:19:10,958 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:None path:null
2021-03-19 16:19:10,986 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700201, packet:: clientPath:null serverPath:null finished:false header:: 1,1  replyHeader:: 1,1662,0  request:: '/keeper/server1,,v{s{31,s{'world,'anyone}}},1  response:: '/keeper/server1 
2021-03-19 16:19:10,991 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700201, packet:: clientPath:null serverPath:null finished:false header:: 2,3  replyHeader:: 2,1662,0  request:: '/keeper/server1,T  response:: s{1662,1662,1616185150959,1616185150959,0,0,0,72080397402374657,0,0,1662} 
2021-03-19 16:19:11,017 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got notification session id: 0x10014bd52700201
2021-03-19 16:19:11,019 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Got WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1 for session id 0x10014bd52700201
2021-03-19 16:19:11,023 DEBUG [Thread-0-EventThread] root: ZK event: 
2021-03-19 16:19:11,023 DEBUG [Thread-0-EventThread] root: WatchedEvent state:SyncConnected type:NodeDataChanged path:/keeper/server1
2021-03-19 16:19:11,025 DEBUG [Thread-0-SendThread(localhost:2181)] org.apache.zookeeper.ClientCnxn: Reading reply session id: 0x10014bd52700201, packet:: clientPath:null serverPath:null finished:false header:: 3,5  replyHeader:: 3,1663,0  request:: '/keeper/server1,#3132372e302e302e313a3530303030,0  response:: s{1662,1663,1616185150959,1616185150992,1,0,0,72080397402374657,15,0,1662} 
2021-03-19 16:19:11,025 INFO  [Thread-0] root: Node created at: /keeper/server1
Starting commModule
2021-03-19 16:19:11,041 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:11,043 INFO  [Thread-0] root: Connected to localhost on port 62964
2021-03-19 16:19:11,063 INFO  [Thread-1] root: Message received by server -> Status: INIT_SERVER
received adminmsg
2021-03-19 16:19:11,067 INFO  [Thread-1] root: Message sent by server -> Status: INIT_SERVER_SUCCESS
2021-03-19 16:19:11,067 INFO  [Thread-1] root: Message received by server -> Status: START
received adminmsg
2021-03-19 16:19:11,067 INFO  [Thread-1] root: Message sent by server -> Status: START_SUCCESS
Starting commModule
2021-03-19 16:19:11,085 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:11,086 INFO  [Thread-0] root: Connected to localhost on port 62969
Starting commModule
2021-03-19 16:19:11,090 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:11,091 INFO  [Thread-0] root: Connected to localhost on port 62973
Starting commModule
2021-03-19 16:19:11,099 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:11,100 INFO  [Thread-0] root: Connected to localhost on port 62978
Starting commModule
2021-03-19 16:19:11,109 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:11,110 INFO  [Thread-0] root: Connected to localhost on port 62982
2021-03-19 16:19:11,111 INFO  [Thread-5] root: Message received by server -> Status: UPDATE
received adminmsg
2021-03-19 16:19:11,113 INFO  [Thread-5] root: Message sent by server -> Status: UPDATE_SUCCESS
Starting commModule
2021-03-19 16:19:11,116 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:11,117 INFO  [Thread-0] root: Connected to localhost on port 62984
Starting commModule
2021-03-19 16:19:11,120 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:11,122 INFO  [Thread-0] root: Connected to localhost on port 62988
Starting commModule
2021-03-19 16:19:11,126 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:11,127 INFO  [Thread-0] root: Connected to localhost on port 62992
2021-03-19 16:19:11,129 INFO  [Thread-8] root: Message received by server -> Status: PROPAGATE_ADMIN
received adminmsg
2021-03-19 16:19:11,137 DEBUG [Thread-8] root: Getting successors
2021-03-19 16:19:11,138 DEBUG [Thread-8] root: Got successors
2021-03-19 16:19:11,138 DEBUG [Thread-8] root: Propagating to: 127.0.0.1:50003 127.0.0.1:50002
2021-03-19 16:19:11,142 INFO  [Thread-8] root: Client communication module connected
2021-03-19 16:19:11,142 INFO  [Thread-8] root: Client communication module connected
2021-03-19 16:19:11,142 DEBUG [Thread-8] root: {}
2021-03-19 16:19:11,143 INFO  [Thread-8] root: Message sent by server -> Status: PROPAGATE_SUCCESS
Starting commModule
2021-03-19 16:19:11,151 INFO  [Thread-0] root: Server communication module connected
2021-03-19 16:19:11,152 INFO  [Thread-0] root: Connected to localhost on port 62998
2021-03-19 16:19:11,152 INFO  [Thread-9] root: Message received by server -> Status: SHUTDOWN
received adminmsg
2021-03-19 16:19:11,153 DEBUG [Thread-9] root: Closing the program
2021-03-19 16:19:11,153 INFO  [Thread-9] root: Message sent by server -> Status: SHUTDOWN_SUCCESS
2021-03-19 16:19:11,154 ERROR [Thread-0] root: Error! Unable to establish connection. 

java.net.SocketException: Socket closed
	at java.base/java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.base/java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:458)
	at java.base/java.net.ServerSocket.implAccept(ServerSocket.java:565)
	at java.base/java.net.ServerSocket.accept(ServerSocket.java:533)
	at app_kvServer.KVServer.run(KVServer.java:408)
2021-03-19 16:19:11,156 INFO  [Thread-0] root: Server stopped.
2021-03-19 16:19:11,156 INFO  [Thread-0] root: Clearing KV Storage...
